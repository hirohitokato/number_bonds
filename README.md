# さくらんぼ計算プリント生成

## 概要

小学生向けの算数プリント「さくらんぼ計算」の問題シートを自動生成する Web アプリです。

> **「さくらんぼ計算」**: 繰り上がりや繰り下がりの計算過程を視覚的に学習できる手法

ページをリロードするたびにランダムに生成された加減算問題をプリントシート形式（HTML）で出力します。

各シートは 10 問単位で構成され、印刷用にレイアウトされたスタイルが適用されています。

## 利用シーン

- **学校・家庭での学習支援**<br>小学校の算数の復習やドリルとして、動的に問題を生成し印刷できるため、教師や保護者が活用できます。
- **オンライン教材サービス**<br>Web ブラウザ経由で簡単にプリントシートを生成できるため、オンライン教材の一部として利用可能です。

## 利用方法

### サーバー起動

- **Deno** を実行環境として利用しています。
- リポジトリ直下にある `deno.json` に定義されたタスクを用いて、以下のコマンドでサーバーを起動します。

```bash
# ※ --allow-net を指定しているのでネットワークアクセス権限が必要です
deno task start
```

### 問題生成

`http://{hostname}/cherry` にアクセスすると問題文を生成し表示します。

### オプション

- `num_sheets` 一度に生成するシート数を設定（デフォルト:1）
  - `http://{hostname}/cherry?num_sheets=3` → 3 シート（計 30 問）のプリントを生成

生成された HTML は、1 シートを A41 枚にプリントアウトできるようにしてあり、印刷することで実際の学習プリントとして使えます。

## (開発者向け)アーキテクチャ

### 使用技術・依存ライブラリ

- Deno & Hono
- さくらんぼ計算問題の描画には SVG を使用

### コンポーネント

- **エントリーポイント**: src/server.ts。ここでシステム全体を初期化
- **ルーティング**: src/routes 以下に配置
- **サービス層**: src/services/makeCherrySheet.ts がシートの HTML を生成するロジックを担当
  - 内部で src/services/makeQuestion.ts や src/services/question.ts を利用し、ランダムかつユニークな算数問題を生成している

### ディレクトリ構成

```
server/
├── deno.json                 # タスク定義やコンパイラオプション
├── src/
│   ├── routes/
│   │   ├── index.ts          # ルート定義の集約
│   │   └── makeCherrySheetRouter.routes.ts  # /cherry エンドポイント
│   ├── services/
│   │   ├── makeCherrySheet.ts    # プリントシート生成ロジック
│   │   ├── makeQuestion.ts       # 問題生成のコアロジック
│   │   └── question.ts           # エンティティ定義
│   ├── static/
│   │   └── style
│   │       └── cherrySheet.css   # 印刷用のスタイルシート
│   ├── tests/
│   │   └── makeQuestion.test.ts  # ユニットテスト
│   └── server.ts                 # サーバーのエントリーポイント
```

## ライセンス

Apache 2.0 ライセンス
